# 📈 레시피 추가 수집 가이드

이미 10,000개를 수집했지만 더 많은 레시피가 필요한 경우 추가 수집 방법을 안내합니다.

---

## 🎯 방법 1: 기존 스크립트에 배치 추가 (추천)

### 장점:
- ✅ 가장 간단하고 안전
- ✅ DB 초기화 없이 이어서 추가
- ✅ 자동 백업 계속 진행

### 방법:

`run_batch_10k.sh` 파일을 편집하여 `COLLECTIONS` 배열에 새로운 항목 추가:

```bash
nano /home/keep/recipe-ai/recipe_ai_system/scripts/utils/run_batch_10k.sh
```

**추가할 위치**: 기존 배열 끝 (6-10 다음)에 추가

```bash
# ===== Phase 6: 디저트/간식 (1000개) =====
# 디저트 (500개)
"6-1:케이크:디저트:일상:빵:굽기:100"
"6-2:쿠키:디저트:일상:빵:굽기:100"
# ... (기존 항목들)
"6-10:에이드:음료:초스피드:과일:만들기:100"

# ===== Phase 7: 추가 수집 (NEW!) =====
# 한식 밑반찬 추가
"7-1:멸치볶음:밑반찬:일상:멸치:볶음:100"
"7-2:어묵볶음:밑반찬:일상:어묵:볶음:100"
"7-3:무말랭이:밑반찬:일상:무:무침:100"
"7-4:고추장아찌:밑반찬:일상:고추:절임:100"
"7-5:깻잎무침:밑반찬:초스피드:깻잎:무침:100"

# 해산물 추가
"7-6:낙지볶음:밑반찬:일상:낙지:볶음:100"
"7-7:꽃게찜:찜:일상:게:찜:100"
"7-8:전복요리:밑반찬:일상:전복:찜:100"
"7-9:문어숙회:밑반찬:일상:문어:삶기:100"
"7-10:조기구이:밑반찬:일상:조기:구이:100"

# 국물 요리 추가
"7-11:갈비탕:국/탕:일상:소고기:끓이기:100"
"7-12:설렁탕:국/탕:일상:소고기:끓이기:100"
"7-13:삼계탕:국/탕:일상:닭고기:끓이기:100"
"7-14:추어탕:국/탕:일상:미꾸라지:끓이기:100"
"7-15:해장국:국/탕:일상:소고기:끓이기:100"

# 고급 요리 추가
"7-16:잡채:밑반찬:일상:당면:볶음:100"
"7-17:불고기:밑반찬:일상:소고기:볶음:100"
"7-18:족발:찜:일상:돼지고기:삶기:100"
"7-19:보쌈:찜:일상:돼지고기:삶기:100"
"7-20:순대:밑반찬:일상:순대:찜:100"
)  # 배열 끝 괄호
```

**총 추가**: 2,000개 (20개 배치 × 100개)

### 실행:
```bash
cd /home/keep/recipe-ai/recipe_ai_system
./scripts/utils/run_batch_10k.sh
# → "DB를 초기화하고 시작하시겠습니까?" → N 입력!
```

---

## 🎯 방법 2: 새로운 스크립트 생성

### 장점:
- ✅ 기존 스크립트 건드리지 않음
- ✅ 특정 카테고리만 집중 수집
- ✅ 여러 번 재사용 가능

### 방법:

새 스크립트 생성:
```bash
nano /home/keep/recipe-ai/recipe_ai_system/scripts/utils/run_batch_additional.sh
```

**내용**:
```bash
#!/bin/bash
# 추가 레시피 수집 스크립트

set -e

SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
cd "$SCRIPT_DIR/../.."

# 색상 및 로그 함수 (run_batch_10k.sh와 동일)
GREEN='\033[0;32m'
BLUE='\033[0;34m'
NC='\033[0m'

log_info() { echo -e "${BLUE}[INFO]${NC} $1"; }
log_success() { echo -e "${GREEN}[✓]${NC} $1"; }

# 환경 체크
source venv/bin/activate
export PGPASSWORD='wkwjsrj4510*'

# 추가 수집 배열
declare -a COLLECTIONS=(
    # 원하는 카테고리만 추가
    "추가1:멸치볶음:밑반찬:일상:멸치:볶음:100"
    "추가2:낙지볶음:밑반찬:일상:낙지:볶음:100"
    "추가3:갈비탕:국/탕:일상:소고기:끓이기:100"
    "추가4:잡채:밑반찬:일상:당면:볶음:100"
    "추가5:불고기:밑반찬:일상:소고기:볶음:100"
)

# 실행 (run_batch_10k.sh의 메인 루프와 동일)
for collection in "${COLLECTIONS[@]}"; do
    IFS=':' read -r phase name type situation ingredient method count <<< "$collection"
    
    log_info "[$phase] $name 수집 중..."
    
    sed -i "s|^RECIPE_TYPE=.*|RECIPE_TYPE=$type|" config/.env
    sed -i "s|^RECIPE_SITUATION=.*|RECIPE_SITUATION=$situation|" config/.env
    sed -i "s|^RECIPE_INGREDIENT=.*|RECIPE_INGREDIENT=$ingredient|" config/.env
    sed -i "s|^RECIPE_METHOD=.*|RECIPE_METHOD=$method|" config/.env
    sed -i "s|^MAX_RECIPES=.*|MAX_RECIPES=$count|" config/.env
    
    python main.py --no-prompt
    log_success "$name 완료!"
    sleep 5
done

log_success "추가 수집 완료!"
```

**실행 권한 부여 & 실행**:
```bash
chmod +x /home/keep/recipe-ai/recipe_ai_system/scripts/utils/run_batch_additional.sh
cd /home/keep/recipe-ai/recipe_ai_system
./scripts/utils/run_batch_additional.sh
```

---

## 🎯 방법 3: 수동으로 한 번에 하나씩

### 장점:
- ✅ 완전한 제어
- ✅ 즉시 결과 확인 가능
- ✅ 테스트용으로 적합

### 방법:

```bash
cd /home/keep/recipe-ai/recipe_ai_system
source venv/bin/activate

# .env 파일 수동 편집
nano config/.env
```

**수정**:
```env
RECIPE_TYPE=밑반찬
RECIPE_INGREDIENT=멸치
RECIPE_METHOD=볶음
MAX_RECIPES=100
```

**실행**:
```bash
python main.py --no-prompt
```

반복하여 원하는 만큼 수집!

---

## 🎯 방법 4: 다양한 필터 조합으로 추가

### 새로운 카테고리 아이디어:

#### 1. 계절별 요리
```bash
"계절1:여름보양식:국/탕:일상:닭고기:끓이기:100"
"계절2:겨울김치:김치:일상:배추:절임:100"
"계절3:봄나물:밑반찬:초스피드:나물:무침:100"
"계절4:가을전:부침:일상:부침가루:부침:100"
```

#### 2. 건강식
```bash
"건강1:다이어트식:밑반찬:일상:야채:찜:100"
"건강2:저염식:밑반찬:일상:두부:조림:100"
"건강3:고단백:밑반찬:일상:닭가슴살:구이:100"
"건강4:채식:밑반찬:일상:야채:볶음:100"
```

#### 3. 간편식
```bash
"간편1:도시락:일품요리:초스피드:밥:만들기:100"
"간편2:원팬요리:일품요리:초스피드:파스타:볶음:100"
"간편3:에어프라이어:튀김:초스피드:닭고기:구이:100"
"간편4:전자레인지:일품요리:초스피드:밥:데우기:100"
```

#### 4. 지역별 특산
```bash
"지역1:전라도음식:밑반찬:일상:고추장:볶음:100"
"지역2:경상도음식:밑반찬:일상:된장:조림:100"
"지역3:제주도음식:밑반찬:일상:고등어:구이:100"
"지역4:북한음식:국/탕:일상:감자:끓이기:100"
```

#### 5. 파티/손님 요리
```bash
"파티1:안주:밑반찬:일상:오징어:볶음:100"
"파티2:손님상:일품요리:일상:갈비:구이:100"
"파티3:뷔페:일품요리:일상:샐러드:만들기:100"
"파티4:명절:밑반찬:일상:나물:무침:100"
```

---

## 📊 추가 수집 전략

### 현재 10,000개 분석 후 부족한 부분 채우기

```bash
# 현재 DB에서 카테고리별 통계
PGPASSWORD='wkwjsrj4510*' psql -h localhost -d recipe_ai_db -U recipe_keep -c "
SELECT 
    SUBSTRING(url FROM 'recipe_type=([^&]+)') as type,
    COUNT(*) as count
FROM recipes 
WHERE url LIKE '%recipe_type=%'
GROUP BY SUBSTRING(url FROM 'recipe_type=([^&]+)')
ORDER BY count DESC;
"
```

부족한 카테고리에 집중하여 추가 수집!

---

## 💡 추천 전략

### 단계별 추가:

1. **Phase 7: 한식 심화 (2,000개)**
   - 밑반찬, 장아찌, 젓갈, 무침 등

2. **Phase 8: 세계 요리 (2,000개)**
   - 중식, 일식, 양식, 동남아 등

3. **Phase 9: 특수 요리 (2,000개)**
   - 건강식, 다이어트, 채식, 저염식 등

4. **Phase 10: 계절/행사 (2,000개)**
   - 계절별, 명절, 파티, 도시락 등

**총 목표**: 18,000~20,000개!

---

## 🚀 빠른 시작 (추천)

```bash
# 1. run_batch_10k.sh 편집
nano /home/keep/recipe-ai/recipe_ai_system/scripts/utils/run_batch_10k.sh

# 2. COLLECTIONS 배열에 Phase 7 추가 (위 예시 복사)

# 3. 저장 후 실행
cd /home/keep/recipe-ai/recipe_ai_system
./scripts/utils/run_batch_10k.sh
# → DB 초기화? N 입력!

# 4. 기존 10,000개 + 새로운 2,000개 = 12,000개! 🎉
```

---

## ⚠️ 주의사항

### 중복 방지
- 시스템이 자동으로 URL 기반 중복 체크
- 같은 레시피는 건너뜀 (안전!)

### API 비용
- 추가 2,000개당 약 $0.78
- 5,000개 추가해도 $2 미만

### 시간
- 2,000개당 약 2시간
- 5,000개면 약 5시간

---

## 📋 추가 수집 템플릿

복사해서 바로 사용하세요!

```bash
# Phase 7: 한식 전통 (20개 배치 = 2,000개)
"7-1:장아찌:밑반찬:일상:무:절임:100"
"7-2:젓갈:밑반찬:일상:새우:절임:100"
"7-3:장조림:밑반찬:일상:소고기:조림:100"
"7-4:북어채:밑반찬:일상:북어:무침:100"
"7-5:해파리냉채:밑반찬:일상:해파리:무침:100"
"7-6:묵무침:밑반찬:초스피드:도토리묵:무침:100"
"7-7:김무침:밑반찬:초스피드:김:무침:100"
"7-8:미나리무침:밑반찬:초스피드:미나리:무침:100"
"7-9:숙주나물:밑반찬:초스피드:숙주:무침:100"
"7-10:고사리나물:밑반찬:일상:고사리:볶음:100"
"7-11:도라지무침:밑반찬:일상:도라지:무침:100"
"7-12:더덕구이:밑반찬:일상:더덕:구이:100"
"7-13:마늘종볶음:밑반찬:일상:마늘종:볶음:100"
"7-14:청경채볶음:밑반찬:초스피드:청경채:볶음:100"
"7-15:쑥갓무침:밑반찬:초스피드:쑥갓:무침:100"
"7-16:취나물:밑반찬:일상:취나물:볶음:100"
"7-17:냉이나물:밑반찬:일상:냉이:무침:100"
"7-18:달래무침:밑반찬:초스피드:달래:무침:100"
"7-19:부추무침:밑반찬:초스피드:부추:무침:100"
"7-20:양파장아찌:밑반찬:일상:양파:절임:100"
```

---

**가장 쉬운 방법**: 위 템플릿을 복사해서 `run_batch_10k.sh`의 `COLLECTIONS` 배열에 붙여넣기! 🚀

